/*
react-json v0.0.1
https://github.com/arqex/react-json
MIT: https://github.com/arqex/react-json/raw/master/LICENSE
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require(void 0),require(void 0)):"function"==typeof define&&define.amd?define([,],e):"object"==typeof exports?exports.Json=e(require(void 0),require(void 0)):t.Json=e(t.React,t.Freezer)}(this,function(t,e){return function(t){function e(s){if(n[s])return n[s].exports;var i=n[s]={exports:{},id:s,loaded:!1};return t[s].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var s=n(1),i=n(2),r=n(12),a=n(3),o=n(4),u=n(5),p=n(6),l=n(7),d=n(8),c=n(9),h=n(10),f=n(11),g=s.createClass({getDefaultProps:function(){return{value:{},errors:!1}},childContextTypes:{typeDefaults:s.PropTypes.object},getChildContext:function(){return{typeDefaults:this.state.defaults}},getInitialState:function(){var t=this,e=this.props.value;return e.getListener||(e=new i(e).get()),e.getListener().on("update",function(e){t.setState({value:e}),t.state.errors&&t.getValidationErrors()}),{value:e,defaults:this.createDefaults()}},componentWillReceiveProps:function(t){t.value.getListener||this.setState({value:this.state.value.reset(t.value)}),this.setState({defaults:this.createDefaults()})},render:function(){var t=this.props.settings||{},e=s.createElement(a,{type:"object",value:this.state.value,settings:r({},this.state.defaults.object,{fields:t.fields,editing:t.editing,extensible:t.extensible,header:!1,order:t.order}),ref:"value",defaults:this.state.defaults});return s.DOM.div({className:"jsonEditor"},e)},getValue:function(){return this.state.value.toJS()},getValidationErrors:function(){var t=this.getValue(),e=this.refs.value.getValidationErrors(t);return this.setState({errors:e.length}),e.length?e:!1},getDeepSettings:function(){var t={};for(var e in f)t[e]=f[e](this,t[e]);return t},createDefaults:function(){var t=this.props.settings||{},e=a.prototype.components,n=t.defaults||{},s={};for(var i in e)s[i]=r({},e[i].prototype.defaults||{},n[i]||{});return s}});g.registerType=a.registerType.bind(a),g.registerType("object",o),g.registerType("array",u,!0),g.registerType("string",p,!0),g.registerType("text",c,!0),g.registerType("number",d,!0),g.registerType("boolean",l,!0),g.registerType("password",h,!0),t.exports=g},function(e,n,s){e.exports=t},function(t,n,s){t.exports=e},function(t,e,n){"use strict";var s=n(1),i=n(11),r=n(12),a=s.createClass({components:{},typeCheckOrder:[],contextTypes:{typeDefaults:s.PropTypes.object},render:function(){var t=this.getComponent(),e=r({},this.context.typeDefaults[this.props.type],this.props.settings);return this.addDeepSettings(e),s.createElement(t,{value:this.props.value,settings:e,onUpdated:this.props.onUpdated,ref:"field"})},getComponent:function(){var t=this.props.type;return t||(t=this.guessType(this.props.value)),this.fieldType=t,this.components[t]},guessType:function(t){for(var e=!1,n=0,s=this.typeCheckOrder;!e&&n<s.length;)this.components[s[n]].prototype.isType(t)?e=s[n++]:n++;return e||"object"},getValidationErrors:function(t){return this.refs.field.getValidationErrors(t)},addDeepSettings:function(t){var e,n=this.props.parentSettings||{};for(var s in i)e=i[s](n[s],t[s]),"undefined"!=typeof e&&(t[s]=e)}});a.registerType=function(t,e,n){var s=a.prototype;s.components[t]=e,n&&s.typeCheckOrder.unshift(t)},t.exports=a},function(t,e,n){"use strict";var s=n(1),i=n(13),r=n(12),a=n(14),o=s.createClass({mixins:[a],getInitialState:function(){return this.getStateFromProps(this.props)},getStateFromProps:function(t){return{editing:t.settings.editing||!1,fields:r({},t.settings&&t.settings.fields||{})}},defaultValue:{},render:function(){{var t=this,e=this.props.settings,n=this.state.editing||e.header===!1?"open jsonObject jsonCompound":"jsonObject jsonCompound",i="",a=(this.state.fields,[]);r({},this.props.value)}this.getFieldOrder().forEach(function(e){a.push(t.renderField(e))});var o=[a];return e.adder!==!1&&o.push(this.renderAdder()),i=s.DOM.div({key:"o",className:"jsonChildren"},o),s.DOM.span({className:n},[this.renderHeader(),i])},renderField:function(t){var e=this.props.value[t],n=this.state.fields[t]||{};return n.settings||(n.settings={}),s.createElement(i,{value:e,key:t,name:t,ref:t,definition:n,onUpdated:this.updateField,onDeleted:this.deleteField,parentSettings:this.props.settings})},getDefaultHeader:function(){return"Map ["+Object.keys(this.props.value).length+"]"},getDefaultAdder:function(){return"+ Add field"},updateField:function(t,e){this.checkEditingSetting(t),this.props.value.set(t,e)},deleteField:function(t){this.props.value.remove(t)},getValidationErrors:function(t){var e=this,n=[],s=Object.keys(this.refs);return s.forEach(function(t){var s=e.refs[t].getValidationErrors();s&&(n=n.concat(s))}),n},getFieldOrder:function(){var t=this.props.settings.order,e=typeof t;if(!t||"function"!=e&&t.constructor!==Array)return Object.keys(this.props.value);var n=r({},this.props.value),s=[];if("function"==e)return t(n);t.constructor===Array&&t.forEach(function(t){"undefined"!=typeof n[t]&&(s.push(t),delete n[t])});for(var i in n)-1==s.indexOf(i)&&s.push(i);return s}});t.exports=o},function(t,e,n){"use strict";var s=n(1),i=n(13),r=(n(12),n(14)),a=s.createClass({mixins:[r],getInitialState:function(){return this.getStateFromProps(this.props)},getStateFromProps:function(t){return{editing:t.settings.editing||!1,fields:this.state&&this.state.fields||{}}},defaultValue:[],render:function(){for(var t,e=this.props.settings,n=this.state.editing?"open jsonArray jsonCompound":"jsonArray jsonCompound",r="",a=this.state.fields,o=[],u=0;u<this.props.value.length;u++)t=a[u]||{},t.settings||(t.settings={}),o.push(s.createElement(i,{value:this.props.value[u],key:u,name:u,definition:t,onUpdated:this.updateField,onDeleted:this.deleteField,parentSettings:this.props.settings}));var p=[o];return e.adder!==!1&&p.push(this.renderAdder(this.props.value.length)),r=s.DOM.div({key:"o",className:"jsonChildren"},p),s.DOM.span({className:n},[this.renderHeader(),r])},getDefaultHeader:function(){return"List ["+this.props.value.length+"]"},getDefaultAdder:function(){return"+ Add element"},updateField:function(t,e){this.checkEditingSetting(t),this.props.value.set(t,e)},deleteField:function(t){var e={};for(var n in this.state.fields)n>t?e[n-1]=this.state.fields[n]:t>n&&(e[n]=this.state.fields[n]);this.props.value.splice(t,1),this.setState({fields:e})},isType:function(t){return t&&t.constructor==Array}});t.exports=a},function(t,e,n){var s=n(1),i=n(15),r=s.createClass({mixins:[i],typeClass:"jsonString",inputType:"text",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},updateValue:function(t){this.setState({value:t.target.value})},isType:function(t){return"object"!=typeof t}});t.exports=r},function(t,e,n){var s=n(1),i=s.createClass({defaultValue:!1,render:function(){var t="jsonBoolean";return s.DOM.input({type:"checkbox",className:t,checked:this.props.value,onChange:this.updateValue})},setValue:function(){this.setState({editing:!1}),this.props.onUpdated(this.state.value)},updateValue:function(t){this.props.onUpdated(t.target.checked)},isType:function(t){return"boolean"==typeof t},componentWillReceiveProps:function(t){this.props.value!=t.value&&this.setState({value:t.value})}});t.exports=i},function(t,e,n){var s=n(1),i=n(15),r=s.createClass({mixins:[i],typeClass:"jsonNumber",inputType:"number",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},updateValue:function(t){this.setState({value:parseFloat(t.target.value)})},isType:function(t){return"number"==typeof t}});t.exports=r},function(t,e,n){var s=n(1),i=n(15),r=s.createClass({mixins:[i],defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){var t="jsonText";return this.state.editing?s.DOM.textarea({value:this.state.value,onChange:this.updateValue,placeholder:this.props.settings.placeholder||"",onBlur:this.setValue,ref:"input"}):s.DOM.span({onClick:this.setEditMode,className:t},this.props.value)},updateValue:function(t){this.setState({value:t.target.value})},isType:function(t){return"string"==typeof t&&t.length>100}});t.exports=r},function(t,e,n){var s=n(1),i=n(15),r=s.createClass({mixins:[i],typeClass:"jsonPassword",inputType:"password",defaultValue:"",getInitialState:function(){return this.getStateFromProps(this.props)},render:function(){return this.renderInput()},getDisplayModeString:function(){return this.getWildcards()},getWildcards:function(){for(var t="",e=this.state.value.length-1;e>=0;e--)t+="*";return t},isType:function(){return!1},updateValue:function(t){this.setState({value:t.target.value})}});t.exports=r},function(t,e,n){t.exports={editing:function(t,e){return"undefined"!=typeof e?e:"always"==t?"always":void 0},adder:function(t,e){return"undefined"!=typeof e?e:"undefined"!=typeof t?t:!0}}},function(t,e,n){"use strict";function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=Object.assign||function(t,e){for(var n,i,r=s(t),a=1;a<arguments.length;a++){n=arguments[a],i=Object.keys(Object(n));for(var o=0;o<i.length;o++)r[i[o]]=n[i[o]]}return r}},function(t,e,n){"use strict";var s=n(1),i=n(12),r=n(16),a=n(3),o=s.createClass({getInitialState:function(){return{error:!1}},getDefaultProps:function(){return{definition:{}}},render:function(){var t=this.props.definition||{},e="jsonField",n=t.type||a.prototype.guessType(this.props.value),i=this.renderTypeField(n),r="";return e+=" "+n+"Field",this.state.error&&(e+=" jsonError",r=s.DOM.span({key:"e",className:"jsonErrorMsg"},this.state.error)),s.DOM.div({className:e},[s.DOM.span({className:"jsonName",key:"n"},[s.DOM.a({key:"a",href:"#",className:"jsonRemove",onClick:this.handleRemove},"x"),s.DOM.span({key:"s1"},(t.title||this.props.name)+":")]),s.DOM.span({className:"jsonValue",key:"v"},[s.DOM.span({key:"s2"},i)]),r])},renderTypeField:function(t){var e,n=this.props.definition||{},r=i({},n.settings||{});return n.fields&&(r.fields=n.fields),e=s.createElement(a,{type:t,value:this.props.value,settings:r,onUpdated:this.onUpdated,ref:"typeField",parentSettings:this.props.parentSettings})},handleRemove:function(t){this.props.onDeleted(this.props.name)},shouldComponentUpdate:function(t,e){return t.value!=this.props.value||e.error!=this.state.error},onUpdated:function(t){this.props.onUpdated(this.props.name,t)},getValidationErrors:function(t){var e=[],n=this.props.definition.validates,s=this.props.name,i=this.refs.typeField;if("object"==i.fieldType&&(e=i.getValidationErrors(t),e.forEach(function(t){t.path=t.path?s+"."+t.path:s})),!n)return e;var a,o=r.getValidationError(this.props.value,t,n);return o?(a=this.props.definition.errorMessage,a||(a=(this.props.definition.title||this.props.name)+" value is not valid."),o.path=s,o.message=a,this.setState({error:a}),e=e.concat([o])):this.state.error&&this.setState({error:!1}),e}});t.exports=o},function(t,e,n){"use strict";var s=n(1),i=n(17),r=n(12);t.exports={renderHeader:function(){var t=this.props.settings.header;if(t===!1)return"";var e,n=typeof t;return e="function"==n?t(this.props.value.toJS()):"undefined"==n?this.getDefaultHeader():t,s.DOM.span({key:"s",onClick:this.toggleEditing,className:"compoundToggle"},e)},toggleEditing:function(){"always"!=this.state.editing&&this.props.settings.header!==!1&&this.setState({editing:!this.state.editing})},componentWillReceiveProps:function(t){this.props.settings.editing!=t.settings.editing&&this.setState({editing:t.editing})},renderAdder:function(t){var e,n=this.props.settings.adder,r=typeof n;return e="function"==r?n(this.props.value.toJS()):n===!0||"undefined"==r?this.getDefaultAdder():n,s.createElement(i,{onCreate:this.createField,name:t,key:"add",text:e})},createField:function(t,e,n){if(this.props.value[t])return console.log("Field "+t+" already exists.");n.settings={editing:"always"==this.state.editing?"always":!0};var s=r({},this.state.fields);s[t]=n,this.setState({fields:s}),this.props.value.set(t,e)},checkEditingSetting:function(t){var e=this.state.fields;e[t]&&e[t].settings.editing===!0&&(e=r({},e),e[t].settings.editing=!1,this.setState({fields:e}))}}},function(t,e,n){"use strict";var s=n(1);t.exports={getStateFromProps:function(t){return{editing:t.settings.editing||!1,value:t.value}},renderInput:function(){var t=this.typeClass;return this.state.editing?s.DOM.input({type:this.inputType,value:this.state.value,placeholder:this.props.settings.placeholder||"",onChange:this.updateValue,onBlur:this.setValue,ref:"input",onKeyDown:this.handleKeyDown}):s.DOM.span({onClick:this.setEditMode,className:t},this.getDisplayString())},getDisplayString:function(){return this.getDisplayModeString?this.getDisplayModeString():this.props.value},componentWillReceiveProps:function(t){this.props.value!=t.value?this.setState({value:t.value}):this.props.settings.editing!=t.settings.editing&&this.setState({editing:t.editing})},componentDidUpdate:function(t,e){this.state.editing&&!e.editing&&this.focus()},componentDidMount:function(){this.state.editing&&this.focus()},setEditMode:function(){this.setState({editing:!0})},setValue:function(){"always"!=this.state.editing&&this.setState({editing:!1}),this.props.onUpdated(this.state.value)},toggleEditing:function(){this.setState({editing:!this.state.editing})},handleKeyDown:function(t){13==t.which&&this.setValue()},focus:function(){var t=this.refs.input.getDOMNode();t.focus(),t.value=t.value}}},function(t,e,n){"use strict";function s(t,e){return t.length?s(t.slice(1),e[t[0]]):e}var i={required:function(t){return t&&("string"!=typeof t||t.trim())?!0:!1},email:function(t){if(!t)return!0;var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)},length:function(t,e,n,s){return n||(n=0),s||(s=1/0),t.length>=n&&t.length<=s},integer:function(t,e,n,s){if(n||0===n||(n=-(1/0)),s||(s=1/0),!t&&0!=t)return!0;var i=parseInt(t);return t!=i?!1:s>=i&&i>=n},checked:function(t){return t},matches:function(t,e,n){return t==s(n.split("."),e)}};t.exports={getValidationError:function(t,e,n){var s=[],o=!1,u=0;"string"==typeof n?s=r(n):"function"==typeof n?s=[n]:n&&n.constructor===Array&&(s=n);for(var p,l,d;!o&&u<s.length;)d=s[u++],"string"==typeof d?(p=a(d),l=i[p.name],l?l.apply(null,[t,e].concat(p.args))||(o={value:t,method:d}):console.log("Unkown validation method "+p.name)):"function"==typeof d&&(d(t,e)||(o={value:t,method:"custom"}));return o}};var r=function(t){return t.match(/[^\s\[]+(\[[^\]]+?\])?/gi)},a=function(t){var e,n=t.split("["),s={name:n[0],args:[]};return n.length>1&&(e=n[1],"]"==e[e.length-1]&&(e=e.slice(0,e.length-1)),s.args=e.split(/\s*,\s*/)),s}},function(t,e,n){var s=n(1),i=n(3),r=s.createClass({getInitialState:function(){return{creating:this.props.creating||!1,name:this.props.name,type:"string"}},render:function(){if(!this.state.creating)return s.DOM.a({className:"jsonAdd",href:"#",onClick:this.handleCreate},this.props.text);var t,e=this.getTypes().map(function(t){return s.DOM.option({value:t,key:t},t[0].toUpperCase()+t.slice(1))});return t="undefined"!=typeof this.props.name?[s.DOM.span({className:"jsonName"},this.props.name),s.DOM.span(null,":")]:[s.DOM.input({ref:"keyInput",type:"text",value:this.state.value,onChange:this.changeKey}),s.DOM.span(null,":")],s.DOM.div({className:"jsonField jsonFieldAdder"},[t,s.DOM.select({key:"s",value:this.state.type,onChange:this.changeType,ref:"typeSelector"},e),s.DOM.button({key:"b",onClick:this.createField},"OK"),s.DOM.a({key:"a",href:"#",className:"cancelField",onClick:this.handleCancel},"Cancel")])},componentDidUpdate:function(t,e){!e.creating&&this.state.creating&&(this.refs.keyInput?this.refs.keyInput.getDOMNode().focus():this.refs.typeSelector.getDOMNode().focus())},componentWillReceiveProps:function(t){this.setState({name:t.name})},handleCreate:function(t){t.preventDefault(),this.setState({creating:!0})},handleCancel:function(t){t.preventDefault(),this.setState({creating:!1})},changeType:function(t){this.setState({type:t.target.value})},changeKey:function(t){this.setState({name:t.target.value})},createField:function(){this.setState({creating:!1});var t=i.prototype.components[this.state.type].prototype.defaultValue;this.props.onCreate(this.state.name,t,{type:this.state.type})},getTypes:function(){return Object.keys(i.prototype.components)}});t.exports=r}])});